<<<<<<< HEAD
# FLOWER_BOT
=======
# FLOWER_BOT (aiogram 3, FSM)

Telegram-Ð±Ð¾Ñ‚ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸ Ñ†Ð²ÐµÑ‚Ð¾Ð² Ð² ÐÑÑ‡Ð°Ð½Ð³Ðµ. Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ Ð·Ð°Ð´Ð°Ð½Ð¸ÑŽ Ð¸ Ð½Ðµ Ð¼ÐµÐ½ÑÐµÑ‚ ÐºÐ°Ð½Ð¾Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð³Ð»Ð°Ð²Ð½Ð¾Ð³Ð¾ Ð¼ÐµÐ½ÑŽ.

## Ð¡Ñ‚ÐµÐº
- Python 3.10+
- aiogram 3.x (FSM)
- SQLite (Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾) / PostgreSQL (Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· asyncpg)
- aiosqlite
- python-dotenv

## Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°
```
flower_bot/
â”œâ”€â”€ main.py
â”œâ”€â”€ config.py
â”œâ”€â”€ env.example
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ db.py
â”‚   â””â”€â”€ models.py
â”œâ”€â”€ handlers/
â”‚   â”œâ”€â”€ user.py
â”‚   â”œâ”€â”€ catalog.py
â”‚   â”œâ”€â”€ orders.py
â”‚   â””â”€â”€ admin.py
â”œâ”€â”€ keyboards/
â”‚   â”œâ”€â”€ reply.py   # Ð³Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ (ðŸ› ÐœÐ°Ð³Ð°Ð·Ð¸Ð½, ðŸ“¦ Ð—Ð°ÐºÐ°Ð·Ñ‹, ðŸ” ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·, ðŸ’¬ ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°)
â”‚   â””â”€â”€ inline.py
â”œâ”€â”€ states/
â”‚   â”œâ”€â”€ order.py
â”‚   â””â”€â”€ admin.py
â””â”€â”€ utils/
    â”œâ”€â”€ helpers.py
    â””â”€â”€ notifications.py
```

## Ð§Ñ‚Ð¾ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾ Ð¿Ð¾ Ð¢Ð—
- Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ (reply) Ñ ÐºÐ½Ð¾Ð¿ÐºÐ°Ð¼Ð¸: `ðŸ› ÐœÐ°Ð³Ð°Ð·Ð¸Ð½`, `ðŸ“¦ Ð—Ð°ÐºÐ°Ð·Ñ‹`, `ðŸ” ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·`, `ðŸ’¬ ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°` â€” Ð±ÐµÐ· Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ñ‚ÐµÐºÑÑ‚Ð°/Ð¿Ð¾Ñ€ÑÐ´ÐºÐ°.
- ÐšÐ°Ñ‚Ð°Ð»Ð¾Ð³:
  - ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ (inline) Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð¾Ð¼ Ð² Ð³Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ.
  - ÐŸÐ°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ñ Ð¿Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ð°Ð¼, 5 Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ, Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ñ Ñ„Ð¾Ñ‚Ð¾/Ñ†ÐµÐ½Ð¾Ð¹/Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸ÐµÐ¼ + ÐºÐ½Ð¾Ð¿ÐºÐ° Â«âœ… Ð—Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒÂ».
  - Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° Ñ‚Ð¾Ð²Ð°Ñ€Ð° Ð¿Ð¾ Ð½Ð°Ð¶Ð°Ñ‚Ð¸ÑŽ Â«âœ… Ð—Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒÂ», Ð·Ð°Ñ‚ÐµÐ¼ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´ Ð² FSM.
- ÐžÑ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°ÐºÐ°Ð·Ð° (FSM `OrderStates`):
  - Ð”Ð°Ñ‚Ð° (ÑÐµÐ³Ð¾Ð´Ð½Ñ/Ð·Ð°Ð²Ñ‚Ñ€Ð°/14 Ð´Ð½ÐµÐ¹, ÑÐµÐ³Ð¾Ð´Ð½Ñ ÑÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ 18:00), Ð²Ñ€ÐµÐ¼Ñ, Ð°Ð´Ñ€ÐµÑ (Ð³ÐµÐ¾ Ð¸Ð»Ð¸ Ñ‚ÐµÐºÑÑ‚), Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÐºÐ° (Ñ‚ÐµÐºÑÑ‚/Ð¿Ñ€Ð¾Ð¿ÑƒÑÐº), Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½ (ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚ Ð¸Ð»Ð¸ Ð²Ð°Ð»Ð¸Ð´Ð¸Ñ€ÑƒÐµÐ¼Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚), Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ.
  - Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°ÐºÐ°Ð·Ð° Ð² Ð‘Ð” ÑÐ¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð¼ Â«ðŸŸ¡ ÐÐ¾Ð²Ñ‹Ð¹Â», Ñ€Ð°ÑÑ‡Ñ‘Ñ‚ Ð¿Ñ€ÐµÐ´Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ 50%.
  - Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð² Ñ ÐºÐ½Ð¾Ð¿ÐºÐ°Ð¼Ð¸ Â«âœ… ÐŸÑ€Ð¸Ð½ÑÑ‚ÑŒ Ð² Ñ€Ð°Ð±Ð¾Ñ‚ÑƒÂ» / Â«âŒ ÐžÑ‚ÐºÐ»Ð¾Ð½Ð¸Ñ‚ÑŒÂ».
  - ÐžÑ‚Ð²ÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ Ñ Ñ€ÐµÐºÐ²Ð¸Ð·Ð¸Ñ‚Ð°Ð¼Ð¸ Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹.
- Ð—Ð°ÐºÐ°Ð·Ñ‹:
  - Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ñ… Ð·Ð°ÐºÐ°Ð·Ð¾Ð² Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ (Ð´Ð¾ 10), Ð´ÐµÑ‚Ð°Ð»Ð¸ Ð·Ð°ÐºÐ°Ð·Ð°.
  - Â«ðŸ” ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·Â» â€” ÑÐ¿Ð¸ÑÐ¾Ðº Ð·Ð°Ð²ÐµÑ€ÑˆÑ‘Ð½Ð½Ñ‹Ñ… (ðŸŸ¢) Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ñ… 3, Ð·Ð°Ð¿ÑƒÑÐº FSM Ñ Ñ‚ÐµÐ¼ Ð¶Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð¼.
- ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°:
  - ÐœÐµÐ½ÑŽ FAQ (Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ°, Ð¾Ð¿Ð»Ð°Ñ‚Ð°, Ð²Ñ€ÐµÐ¼Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹).
  - Â«ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ„Ð»Ð¾Ñ€Ð¸ÑÑ‚ÑƒÂ» â€” ÑÐ±Ð¾Ñ€ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ, ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð² Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¾Ð¹ Ð´Ð»Ñ Ð¾Ñ‚Ð²ÐµÑ‚Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŽ.
- ÐÐ´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»ÑŒ (Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ð¿Ð¾ /admin Ð´Ð»Ñ `ADMIN_IDS`):
  - Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ð° (Ñ„Ð¾Ñ‚Ð¾, Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ, ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ, Ñ†ÐµÐ½Ð°/Â«Ð¾Ñ‚Â», Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ, Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ).
  - Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼Ð¸: Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ.
  - Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑÑ‹ Ð·Ð°ÐºÐ°Ð·Ð°: Ð¿Ñ€Ð¸Ð½ÑÑ‚ÑŒ/Ð¾Ñ‚ÐºÐ»Ð¾Ð½Ð¸Ñ‚ÑŒ (Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ Ñƒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ).

## ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ (.env)
Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `flower_bot/env.example` Ð² `.env` (Ñ€ÑÐ´Ð¾Ð¼ Ñ `main.py`) Ð¸ Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:
```
BOT_TOKEN=Ð²Ð°Ñˆ_Ñ‚Ð¾ÐºÐµÐ½
ADMIN_IDS=111111111,222222222
ADMIN_CHAT_ID=111111111
DB_PATH=flower_bot/data/bot.db
TIMEZONE=Asia/Ho_Chi_Minh
```

## Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾
```bash
cd flower_bot
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
python -m flower_bot.main
```

## Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð½Ð° Render (web service)
1) Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹: Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ñƒ Ð¿Ð°Ð¿ÐºÑƒ ÐºÐ°Ðº Ñ€Ð°Ð±Ð¾Ñ‡ÑƒÑŽ (ÐºÐ¾Ñ€ÐµÐ½ÑŒ ÑÐµÑ€Ð²Ð¸ÑÐ° Render Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ð¸Ð´ÐµÑ‚ÑŒ `flower_bot/main.py`).
2) Build Command: `pip install -r flower_bot/requirements.txt`
3) Start Command: `python -m flower_bot.main`
4) Environment:
   - Add Environment Variable: `PYTHON_VERSION=3.10`
   - Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¸Ð· `.env` (BOT_TOKEN, ADMIN_IDS, ADMIN_CHAT_ID, DB_PATH, TIMEZONE).
5) Type: Web Service. HTTP Port: Render Ð·Ð°Ð´Ð°ÑÑ‚ `PORT`, Ð½Ð¾ Ð±Ð¾Ñ‚Ñƒ Ð² Ñ€ÐµÐ¶Ð¸Ð¼Ðµ polling Ð¾Ð½ Ð½Ðµ Ð½ÑƒÐ¶ÐµÐ½; Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ start command ÐºÐ°Ðº ÐµÑÑ‚ÑŒ.
6) Health check: Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð¸Ð»Ð¸ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ (Ð±Ð¾Ñ‚ Ð² polling, Ð±ÐµÐ· Ð²ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€Ð°).

## ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ
- Ð‘Ð°Ð·Ð° Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ SQLite. Ð”Ð»Ñ PostgreSQL Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð² `database/db.py` Ð½Ð° asyncpg, Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð¼ÐµÑ‚Ð¾Ð´Ð¾Ð² Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚ÐµÐ¼ Ð¶Ðµ.
- ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ð´Ð°Ñ‚Ñ‹ â€” 14 Ð´Ð½ÐµÐ¹ Ð²Ð¿ÐµÑ€Ñ‘Ð´, ÑÐµÐ³Ð¾Ð´Ð½Ñ ÑÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ 18:00 Ð¿Ð¾ TIMEZONE.
- ÐÐ´Ð¼Ð¸Ð½-Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ/ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ð¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð´Ð¾Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð¿Ð¾ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð½Ð¾ÑÑ‚Ð¸, ÐºÐ°Ñ€ÐºÐ°Ñ Ð¸ ÑÑ‚Ð°Ñ‚ÑƒÑÑ‹ Ð·Ð°ÐºÐ°Ð·Ð¾Ð² Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹.

>>>>>>> 26b0e5b (initial FLOWER_BOT bot implementation)
